(window.webpackJsonpadmin=window.webpackJsonpadmin||[]).push([[0],{204:function(e,t,a){e.exports=a.p+"static/media/app-logo.ee547009.png"},343:function(e,t,a){e.exports=a(650)},348:function(e,t,a){},349:function(e,t,a){},352:function(e,t,a){},496:function(e,t,a){},523:function(e,t,a){},525:function(e,t,a){},644:function(e,t,a){},646:function(e,t,a){},647:function(e,t,a){},648:function(e,t,a){},649:function(e,t,a){},650:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"login",(function(){return M})),a.d(n,"setAppLoading",(function(){return W})),a.d(n,"websites",(function(){return Y})),a.d(n,"checkAttachedScript",(function(){return R}));var r={API:"https://api.staging.click.apte.asia",MAIN_DOMAIN:".staging.click.apte.asia",FRONT_END_DOMAIN:"https://staging.click.apte.asia"},i=a(1),c=a.n(i),o=a(7),s=a.n(o),l=(a(348),a(214)),u=(a(349),a(350),a(290)),p=a(20),d=a(21),m=a(23),h=a(22),g=a(24),f=a(81),b=a(122),y=a(655),k=a(212),E=a(10),v=a(36),O=a(58),j=a(659),I=a(40),C=a(653),A=a(651),S=a(652),w=a(656),P={login:"".concat(r.API,"/api/admin/users/login"),info:"".concat(r.API,"/api/users/info"),getPackages:"".concat(r.API,"/api/packages"),checkWebsiteCode:"".concat(r.API,"/api/websites/{code}"),updateVipDomain:"".concat(r.API,"/api/users/website"),getUsers:"".concat(r.API,"/api/admin/users"),getAccounts:"".concat(r.API,"/api/admin/users/accounts"),getGoogleAdsErrors:"".concat(r.API,"/api/google-ad-errors"),getGoogleAdsErrorsStatistic:"".concat(r.API,"/api/google-ad-errors/statistic"),statisticGoogleApiAndError:"".concat(r.API,"/api/admin/users/report/google-statistic"),getWebsites:"".concat(r.API,"/api/admin/websites"),checkScriptWebsite:"".concat(r.API,"/api/admin/websites/{code}/recheck-tracking-code"),updateUserLicence:"".concat(r.API,"/api/admin/user-licences"),updateAccountLimitWebsite:"".concat(r.API,"/api/admin/account-ads/limit-website")},T=a(13),x=a.n(T),D=(a(352),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).abortController=new AbortController,a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentWillUnmount",value:function(){this.abortController.abort()}}]),t}(c.a.Component)),_=a(63),N=a(106),L=a(30),M=function(e,t){return{type:"LOGIN_SUCCESS",user:e,token:t}},W=function(e){return{type:"APP_LOADING",isLoading:e}},Y=function(e){return{type:"LIST_WEBSITES",websites:e}},R=function(e){return{type:"CHECKING_ATTACH_SCRIPT",website:e}},H={FRONT_END:{token:"".concat("__ata__","_token"),user:"".concat("__ata__","_user"),activeAccountId:"".concat("__ata__","_active_account_id"),activeAdsAccountId:"".concat("__ata__","_active_ads_account_id"),standBy:"".concat("__ata__","_stand_by")},token:"token",user:"user"},U=1,F=2,G=3,K=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).secret=r,a.onClick=a.onClick.bind(Object(_.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"onClick",value:function(){var e=this;this.props.setAppLoading(!0);var t=this.props.cookies,a=t.get(H.token),n=t.get(H.user),i=JSON.parse(JSON.stringify(this.props.user));i._id=i.id,console.log(r),t.set(H.FRONT_END.user,i,{path:"/",domain:r.MAIN_DOMAIN}),t.set(H.FRONT_END.standBy,a,{path:"/",domain:r.MAIN_DOMAIN}),t.set(H.FRONT_END.token,n,{path:"/",domain:r.MAIN_DOMAIN}),setTimeout((function(){window.open(e.secret.FRONT_END_DOMAIN,"_blank"),e.props.setAppLoading(!1)}),1e3)}},{key:"render",value:function(){return this.props.user.role===G?c.a.createElement(N.a,{title:"Thay quy\u1ec1n"},c.a.createElement(I.a,{size:"small",onClick:this.onClick},c.a.createElement(E.a,{type:"login"}))):c.a.createElement(c.a.Fragment,null)}}]),t}(c.a.Component),z=Object(L.b)((function(e){return{users:e.users}}),n)(Object(v.c)(K)),B=a(127),q=a(662),V=a(660),J=a(657),Q=a(44),X=a.n(Q),$=a(294),Z=B.a.Option,ee=["DD/MM/YYYY","DD/MM/YY"],te=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).packages=[],a.key="updatable",a.handleChangePackage=function(e){a.setState({selectedPackage:{_id:e},isDatePickerDisplayed:"FREE"!==$.find(a.props.packages,(function(t){return t._id===e})).type})},a.showModal=function(){a.setState({visible:!0})},a.hideModal=function(){a.setState({visible:!1})},a.updateLicence=function(){var e={userId:a.props.userId,packageId:a.state.selectedPackage._id,expiredAt:new Date(a.state.selectedExpiration).getTime()};"FREE"===a.state.selectedPackage.type&&delete e.expiredAt,X()({method:"PUT",url:P.updateUserLicence,headers:{Accept:"application/json","Content-Type":"application/json",accessToken:a.props.accessToken},data:e,signal:a.abortController.signal}).then((function(e){var t=e.data.messages[0];a.openMessage(t),a.hideModal(),a.props.onUserLicenceUpdated()})).catch((function(e){console.log(e)}))},a.openMessage=function(e){q.a.loading({content:"Loading...",key:a.key}),setTimeout((function(){q.a.success({content:e,key:a.key,duration:2})}))},a.handleChangeDatePicker=function(e){e&&a.setState({selectedExpiration:e})},a.disabledDate=function(e){return e&&e<x()()},a.packages=e.packages,a.state={visible:!1,selectedPackage:{_id:a.props.currentPackage._id,type:a.props.currentPackage.type},selectedExpiration:x()(new Date).add(1,"months"),updatingMessage:{message:"",isSucceed:!0},isDatePickerDisplayed:"FREE"!==a.props.currentPackage.type},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state.selectedPackage._id,a=this.state.selectedExpiration,n=this.state.isDatePickerDisplayed;return c.a.createElement("div",{className:"modal-container"},c.a.createElement(I.a,{onClick:this.showModal,type:"primary"},"C\u1eadp nh\u1eadt licence"),c.a.createElement(V.a,{title:"C\u1eacP NH\u1eacT LICENCE - USER: "+this.props.userFullname,visible:this.state.visible,onOk:this.updateLicence,onCancel:this.hideModal,okText:"C\u1eadp nh\u1eadt",cancelText:"H\u1ee7y b\u1ecf"},c.a.createElement(A.a,null,c.a.createElement(S.a,{span:6}),c.a.createElement(S.a,{span:12},c.a.createElement("div",null,"Ch\u1ecdn g\xf3i licence:",c.a.createElement(B.a,{value:t,style:{width:"100%"},placeholder:"Ch\u1ecdn g\xf3i",onChange:this.handleChangePackage},this.props.packages.map((function(e,t){return c.a.createElement(Z,{value:e._id,key:t},e.name)})))),c.a.createElement("br",null),function(){if(!0===n)return c.a.createElement("div",null,"H\u1ea1n d\xf9ng \u0111\u1ebfn:",c.a.createElement(J.a,{style:{width:"100%"},defaultValue:x()(a,ee[0]),format:ee,onChange:e.handleChangeDatePicker,disabledDate:e.disabledDate}))}()),c.a.createElement(S.a,{span:4}))))}}]),t}(D),ae=Object(L.b)(null,n)(te);function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(a,!0).forEach((function(t){Object(O.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ie=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).currentPage=1,a.packages=[],a.getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,r=t.selectedKeys,i=t.confirm,o=t.clearFilters;return c.a.createElement("div",{style:{padding:8}},c.a.createElement(j.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(r,e,i)},style:{width:188,marginBottom:8,display:"block"},autoFocus:!0}),c.a.createElement(I.a,{type:"primary",onClick:function(){return a.handleSearch(r,e,i)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),c.a.createElement(I.a,{onClick:function(){return a.handleReset(o)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return c.a.createElement(E.a,{type:"search",style:{color:e?"#f2f2f2":void 0}})}}},a.handleSearch=function(e,t,n){n(),e[0]&&a.getUsers(Object(O.a)({},t,e[0])),a.setState({searchText:e[0]})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.isEmptyObj=function(e){return 0===Object.keys(e).length},a.getUsers=function(e){var t=P.getUsers;a.isEmptyObj(e)||(t+="?"+Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&"));var n=a.props.cookies;a.props.setAppLoading(!0),fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",accessToken:n.get(H.token)},signal:a.abortController.signal}).then((function(e){return a.props.setAppLoading(!1),e.json()})).then((function(e){var t=(e.data.entries||[]).map((function(e){return{id:e._id,name:e.name,email:e.email,phone:e.phone,googleId:e.googleId,createdAt:e.createdAt,avatar:e.avatar,role:e.role,licencePackageId:e.licence.packageId._id,licenceName:e.licence.packageId?e.licence.packageId.name:null,licenceType:e.licence.packageId?e.licence.packageId.type:null,licenceExpiration:e.licence.expiredAt,licenceHistories:e.licence.histories}}));a.setState({users:t,totalItems:t.length>0?e.data.totalItems:0})}))},a.refreshUsers=function(){a.getUsers({page:a.state.page,limit:a.state.limit})},a.cookies=a.props.cookies,a.token=a.cookies.get(H.token),a.state={searchText:"",users:[],totalItems:0,page:1,limit:10},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getUsers({page:this.state.page,limit:this.state.limit}),this.getPackages()}},{key:"getPackages",value:function(){var e=this;fetch(P.getPackages,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",accessToken:this.token},signal:this.abortController.signal}).then((function(e){return e.json()})).then((function(t){e.packages=t.data.packages.sort((function(e,t){return e.numOfDays-t.numOfDays}))}))}},{key:"onChangePage",value:function(e){this.state.totalItems>this.state.limit?this.getUsers({page:e,limit:this.state.limit}):this.state.searchText||this.getUsers({page:e,limit:this.state.limit}),this.setState({page:e})}},{key:"render",value:function(){var e=this,t=[{title:"H\xe0nh \u0111\u1ed9ng",dataIndex:"id",key:"id",render:function(e,t){return c.a.createElement(z,{user:t})}},re({title:"H\u1ecd v\xe0 T\xean",dataIndex:"name",key:"name"},this.getColumnSearchProps("name"),{render:function(e,t){return c.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},c.a.createElement("img",{className:"user-avatar",alt:"",src:t.avatar||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png"}),c.a.createElement("span",{className:"user-name"},e))}}),re({title:"Email",dataIndex:"email",key:"email"},this.getColumnSearchProps("email")),{title:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",dataIndex:"phone",key:"phone"},{title:"Google ID",dataIndex:"googleId",key:"googleId"},{title:"Ng\xe0y tham gia",dataIndex:"createdAt",key:"createdAt",render:function(e){return c.a.createElement("span",null,x()(e).format("HH:mm DD/MM/YYYY"))}},{title:"Licence",dataIndex:"licenceName",key:"licenceName",render:function(e,t){if(t.role===U||t.role===F)return c.a.createElement("span",null);var a="free-licence-type",n=t.licenceType;"FREE"!==n&&("VIP1"===n&&(a="vip-licence-type"),"CUSTOM"===n&&(a="custom-licence-type"));var r=(t.licenceHistories||[]).map((function(e,t){return c.a.createElement("p",{style:{fontSize:"12px"},key:t},"V\xe0o l\xfac ",x()(e.createdAt).format("HH:mm DD/MM/YYYY")," ",c.a.createElement("br",null),"Licence: ",e.name)})).reverse();return r=r.length>0?c.a.createElement("div",{style:{maxHeight:"300px",overflow:"auto"}},r):c.a.createElement("span",{style:{fontSize:"12px"}},"Ch\u01b0a c\xf3 ghi nh\u1eadn n\xe0o."),c.a.createElement("div",{className:"user-licence-wrapper"},c.a.createElement("span",{className:"".concat("base-licence-type"," ").concat(a)},e),c.a.createElement(C.a,{placement:"bottom",title:"L\u1ecbch s\u1eed  c\u1eadp nh\u1eadt licence",content:r,trigger:"click",overlayStyle:{width:"200px"}},c.a.createElement(I.a,{type:"link",style:{fontSize:"12px"}},"L\u1ecbch s\u1eed")))}},{title:"H\u1ea1n d\xf9ng licence",dataIndex:"licenceExpiration",key:"licenceExpiration",render:function(e,t){return t.role===U||t.role===F?c.a.createElement("span",null):"VIP1"===t.licenceType||"CUSTOM"===t.licenceType?c.a.createElement("span",null,x()(e).format("HH:mm DD/MM/YYYY")):void 0}},{title:"",dataIndex:"licenceUpdating",key:"licenceUpdating",render:function(t,a){return a.role===U||a.role===F?c.a.createElement("span",null):c.a.createElement(ae,{accessToken:e.token,userFullname:a.name,userId:a.id,packages:e.packages,onUserLicenceUpdated:e.refreshUsers,currentPackage:{_id:a.licencePackageId,type:a.licenceType}})}}],a={position:"bottom",total:this.state.totalItems,pageSize:this.state.limit,current:this.state.page,onChange:function(t){return e.onChangePage(t)}};return c.a.createElement("div",{className:"container"},c.a.createElement(A.a,null,c.a.createElement(S.a,{span:24},c.a.createElement(w.a,{pagination:a,dataSource:this.state.users,columns:t,rowKey:function(e){return e.id},className:"users-table"}))))}}]),t}(D),ce=Object(L.b)((function(e){return{users:e.users}}),n)(Object(v.c)(ie)),oe=(a(496),a(658)),se=a(661),le=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).key="updatable",a.showModal=function(){a.setState({visible:!0})},a.hideModal=function(){a.setState({visible:!1})},a.updateAccountLimitWebsite=function(){a.props.form.validateFields((function(e,t){if(!e){var n={accountId:a.props.accountId,limitWebsite:t.limitWebsite};X()({method:"PUT",url:P.updateAccountLimitWebsite,headers:{Accept:"application/json","Content-Type":"application/json",accessToken:a.props.accessToken},data:n,signal:a.abortController.signal}).then((function(e){var t=e.data.messages[0];a.openMessage(t),a.hideModal(),a.props.onAccountLimitWebsiteEdited()})).catch((function(e){console.log(e)}))}}))},a.openMessage=function(e){q.a.loading({content:"Loading...",key:a.key}),setTimeout((function(){q.a.success({content:e,key:a.key,duration:2})}))},a.state={visible:!1},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return c.a.createElement("div",{className:"modal-container"},c.a.createElement(N.a,{placement:"bottom",title:"Ch\u1ec9nh s\u1eeda",overlayStyle:{fontSize:"12px"}},c.a.createElement(I.a,{onClick:this.showModal,icon:"edit",style:{border:0,background:"rgba(0,0,0,0)"}})),c.a.createElement(V.a,{title:"CH\u1ec8NH S\u1eecA LIMIT WEBSITE - T\xc0I KHO\u1ea2N: "+this.props.adsId,visible:this.state.visible,onOk:this.updateAccountLimitWebsite,onCancel:this.hideModal,okText:"L\u01b0u",cancelText:"H\u1ee7y b\u1ecf"},c.a.createElement(A.a,null,c.a.createElement(S.a,{span:6}),c.a.createElement(S.a,{span:12},c.a.createElement(oe.a,null,c.a.createElement(oe.a.Item,null,c.a.createElement("label",null,c.a.createElement("span",null,"Limit website: "),e("limitWebsite",{rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp limit website"}],initialValue:this.props.currentLimitWebsite})(c.a.createElement(se.a,{prefix:c.a.createElement(E.a,{type:"qrcode",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Limit website"})))))),c.a.createElement(S.a,{span:4}))))}}]),t}(D),ue=oe.a.create({name:"update_limit_website"})(le);function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(a,!0).forEach((function(t){Object(O.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var me=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,r=t.selectedKeys,i=t.confirm,o=t.clearFilters;return c.a.createElement("div",{style:{padding:8}},c.a.createElement(j.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(r,e,i)},style:{width:188,marginBottom:8,display:"block"},autoFocus:!0}),c.a.createElement(I.a,{type:"primary",onClick:function(){return a.handleSearch(r,e,i)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),c.a.createElement(I.a,{onClick:function(){return a.handleReset(o)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return c.a.createElement(E.a,{type:"search",style:{color:e?"#f2f2f2":void 0}})}}},a.handleSearch=function(e,t,n){n(),e[0]&&a.getAccounts(Object(O.a)({},t,e[0])),a.setState({searchText:e[0]})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.isEmptyObj=function(e){return 0===Object.keys(e).length},a.refreshAccounts=function(){a.getAccounts({page:a.state.page,limit:a.state.limit})},a.getAccounts=function(e){var t=P.getAccounts;a.isEmptyObj(e)||(t+="?"+Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")),a.props.setAppLoading(!0),fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",accessToken:a.token},signal:a.abortController.signal}).then((function(e){return e.json()})).then((function(e){var t=(e.data.entries||[]).map((function(e){return{id:e._id,adsId:a.formatAdsId(e.adsId),isConnected:e.isConnected,email:e.userInfo.email,domain:e.websiteInfo?e.websiteInfo.map((function(e){return e.domain})):[],createdAt:e.createdAt,limitWebsite:e.setting.limitWebsite,licenceType:e.licence.packageId.type}}));a.setState({accounts:t,totalItems:t.length>0?e.data.totalItems:0}),setTimeout((function(){a.props.setAppLoading(!1)}),500)}))},a.cookies=a.props.cookies,a.token=a.cookies.get(H.token),a.state={searchText:"",accounts:[],totalItems:0,page:1,limit:10},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAccounts({page:this.state.page,limit:this.state.limit})}},{key:"onChangePage",value:function(e){this.state.totalItems>this.state.limit?this.getAccounts({page:e,limit:this.state.limit}):this.state.searchText||this.getAccounts({page:e,limit:this.state.limit}),this.setState({page:e})}},{key:"formatAdsId",value:function(e){var t=e.split("");return t.splice(0,3).join("")+"-"+t.splice(0,3).join("")+"-"+t.splice(0,4).join("")}},{key:"render",value:function(){var e=this,t=[{title:function(e,t){return c.a.createElement("div",null,c.a.createElement("img",{src:"https://storage.googleapis.com/gweb-uniblog-publish-prod/images/logo_Google_Ads_192px.max-200x200.png",alt:"",className:"ggAds-icon"}),c.a.createElement("span",null,"Google Ads ID"))},dataIndex:"adsId",key:"adsId",render:function(e,t){return c.a.createElement("span",{style:{color:t.isConnected?"#44b543":"crimson",fontWeight:"bold"}},e)}},{title:"Quy\u1ec1n qu\u1ea3n l\xfd",dataIndex:"isConnected",key:"isConnected",render:function(e){return!0===e?c.a.createElement("div",{style:{color:"#44b543"}},c.a.createElement(E.a,{type:"check"})):c.a.createElement("div",{style:{color:"crimson"}},c.a.createElement(E.a,{type:"close"}))}},de({title:"Email",dataIndex:"email",key:"email"},this.getColumnSearchProps("email")),{title:"T\xean mi\u1ec1n",dataIndex:"domain",key:"domain",render:function(e){return e.map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("a",{href:e,target:" _blank"},e))}))}},{title:"Limit webiste",dataIndex:"limitWebsite",key:"limitWebsite",render:function(t,a){return"FREE"===a.licenceType?c.a.createElement("span",null,t):c.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},c.a.createElement("div",{style:{width:"50px"}},t),c.a.createElement(ue,{accessToken:e.token,accountId:a.id,adsId:a.adsId,currentLimitWebsite:a.limitWebsite,onAccountLimitWebsiteEdited:e.refreshAccounts}))}},{title:"Ng\xe0y k\u1ebft n\u1ed1i",dataIndex:"createdAt",key:"createdAt",render:function(e){return c.a.createElement("span",null,x()(e).format("HH:mm DD/MM/YYYY"))}}];return c.a.createElement("div",{className:"container"},c.a.createElement(A.a,null,c.a.createElement(S.a,{span:24},c.a.createElement(w.a,{pagination:{position:"bottom",total:this.state.totalItems,pageSize:this.state.limit,current:this.state.page,onChange:function(t){return e.onChangePage(t)}},dataSource:this.state.accounts,columns:t,rowKey:function(e){return e.adsId},className:"accounts-table",rowClassName:function(e){return!0===e.isConnected?"isConnected":"isNotConnected"}}))))}}]),t}(D),he=Object(L.b)(null,n)(Object(v.c)(me)),ge=(a(523),a(305)),fe=a.n(ge),be=a(306),ye=a.n(be),ke={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Statistic type of Google Ads Error"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{name:"Brands",colorByPoint:!0,data:[]}]},Ee=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).cookies=a.props.cookies,a.token=a.cookies.get(H.token),a.state={ggAdsErrors:[],totalItems:0,page:1,limit:10,statistic:[]},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getGoogleAdsErrors({page:this.state.page,limit:this.state.limit}),this.getStatistic()}},{key:"getStatistic",value:function(){var e=this;X.a.get(P.getGoogleAdsErrorsStatistic,{headers:{accessToken:this.token},signal:this.abortController.signal}).then((function(t){e.setState({statistic:t.data.data})}))}},{key:"getGoogleAdsErrors",value:function(e){var t=this,a=P.getGoogleAdsErrors;void 0!==e.page&&(a+="?page=".concat(e.page)),void 0!==e.limit&&(a+="&limit=".concat(e.limit)),fetch(a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",accessToken:this.token}}).then((function(e){return e.json()})).then((function(e){var a=e.data.entries;t.setState({ggAdsErrors:a,totalItems:a.length>0?e.data.totalItems:0})}))}},{key:"onChangePage",value:function(e){this.getGoogleAdsErrors({page:e,limit:this.state.limit}),this.setState({page:e})}},{key:"render",value:function(){var e=this,t=[];Object.keys({createdAt:{},reason:{},authConfig:{},params:{},error:{},functionName:"",serviceVersion:"",serviceName:"",moduleName:""}).forEach((function(e){-1===["authConfig","error","params"].indexOf(e)?t.push({title:e,dataIndex:e,key:e,render:function(t){return"createdAt"===e?x()(t).format("HH:mm DD/MM/YYY"):t}}):t.push({title:e,dataIndex:e,key:e,render:function(e){var t=c.a.createElement(fe.a,{style:{fontSize:"12px"},data:e});return c.a.createElement(C.a,{content:t,title:"N\u1ed9i dung",placement:"bottom",trigger:"click",overlayStyle:{width:"45vw",maxHeight:"50vh"}},c.a.createElement(I.a,null,"Xem n\u1ed9i dung"))}})})),ke.series[0].data=[],this.state.statistic.forEach((function(e){ke.series[0].data.push({name:e._id,y:e.count})}));var a={position:"bottom",total:this.state.totalItems,pageSize:this.state.limit,current:this.state.page,onChange:function(t){return e.onChangePage(t)}};return c.a.createElement("div",null,c.a.createElement("div",{className:"container",style:{overflow:"auto"}},c.a.createElement(A.a,null,c.a.createElement(S.a,{span:24},c.a.createElement(ye.a,{config:ke})))),c.a.createElement("div",{className:"container"},c.a.createElement(A.a,null,c.a.createElement(S.a,{span:24},c.a.createElement(w.a,{pagination:a,dataSource:this.state.ggAdsErrors,columns:t,rowKey:function(e){return e._id},className:"gg-ads-errors-table"})))))}}]),t}(D),ve=Object(v.c)(Ee),Oe=(a(525),a(83)),je=function(e){function t(e){var a;Object(p.a)(this,t),a=Object(m.a)(this,Object(h.a)(t).call(this,e));var n=x()().subtract(1,"month").format("DD-MM-YYYY"),r=x()().format("DD-MM-YYYY");return a.state={data:[],from:n,to:r},a.chartWrap=c.a.createRef(),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"fetchData",value:function(){var e=this;this.props.setAppLoading(!0);var t=this.props.cookies;X.a.get(P.statisticGoogleApiAndError,{params:{from:this.state.from,to:this.state.to},headers:{accesstoken:t.get(H.token)},signal:this.abortController.signal}).then((function(t){e.mapResults(t.data.data.result),setTimeout((function(){e.props.setAppLoading(!1)}),500)})).catch((function(t){e.props.setAppLoading(!1)}))}},{key:"mapResults",value:function(e){(e=e.map((function(e){return e.requestsNumber=e.requestsNumber||0,e._date=x()(e.date,"DD-MM-YYYY")._d,e}))).sort((function(e,t){return e._date.getTime()<t._date.getTime()?-1:e._date.getTime()===t._date.getTime()?0:1})),this.setState({data:e})}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={name:"Error",stroke:"red",data:[]},t={name:"Request",stroke:"blue",data:[]};this.state.data.forEach((function(a){e.data.push({date:a.date,value:a.googleAdsErrorsNumber}),t.data.push({date:a.date,value:a.requestsNumber})}));var a=[e,t];return c.a.createElement("div",{ref:this.chartWrap},c.a.createElement("h2",null,"Request Google Ads & Error Statistic"),c.a.createElement("h4",null,"From ",c.a.createElement("strong",null,this.state.from)," To ",c.a.createElement("strong",null,this.state.to)),c.a.createElement(Oe.d,{width:this.chartWrap.current?this.chartWrap.current.offsetWidth:800,height:300},c.a.createElement(Oe.a,{strokeDasharray:"3 3"}),c.a.createElement(Oe.f,{dataKey:"date",type:"category",allowDuplicatedCategory:!1}),c.a.createElement(Oe.g,{dataKey:"value"}),c.a.createElement(Oe.e,null),c.a.createElement(Oe.b,null),a.map((function(e){return c.a.createElement(Oe.c,{dataKey:"value",data:e.data,stroke:e.stroke,name:e.name,key:e.name})}))))}}]),t}(D),Ie=Object(L.b)((function(e){return{users:e.users}}),n)(Object(v.c)(je)),Ce=(a(644),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).abortController=new AbortController,a.state={isLoading:!1,record:e.record},a.onClick=a.onClick.bind(Object(_.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"stopSpinning",value:function(){var e=this;setTimeout((function(){e.setState({isLoading:!1})}),500)}},{key:"onClick",value:function(){var e=this;console.log(this.props),this.setState({isLoading:!0});var t=this.props.cookies;X()({method:"PUT",url:P.checkScriptWebsite.replace("{code}",this.props.record.code),headers:{Accept:"application/json","Content-Type":"application/json",accessToken:t.getC(H.token)},signal:this.abortController.signal}).then((function(t){e.setState({record:t.data.data.website}),e.stopSpinning()})).catch((function(t){console.log(t),e.stopSpinning()}))}},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"render",value:function(){var e=c.a.createElement(E.a,{type:"loading",spin:!0});return c.a.createElement("div",null,c.a.createElement(N.a,{placement:"topLeft",title:"Ki\u1ec3m tra g\u1eafn m\xe3"},c.a.createElement("span",{className:"recheck-website-tracking",onClick:this.onClick},this.state.isLoading?e:c.a.createElement(E.a,{type:"reload"}))),c.a.createElement("a",{href:this.props.text,target:" _blank",style:{color:this.props.record.isTracking?"#44b543":"crimson",fontFamily:"tahoma"}},this.props.text))}}]),t}(c.a.Component)),Ae=Object(L.b)((function(e){return{websites:e.websites,users:e.users}}),n)(Ce);function Se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function we(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Se(a,!0).forEach((function(t){Object(O.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Pe=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).paginationConfig={},a.getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,r=t.selectedKeys,i=t.confirm,o=t.clearFilters;return c.a.createElement("div",{style:{padding:8}},c.a.createElement(j.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(r,e,i)},style:{width:188,marginBottom:8,display:"block"},autoFocus:!0}),c.a.createElement(I.a,{type:"primary",onClick:function(){return a.handleSearch(r,e,i)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),c.a.createElement(I.a,{onClick:function(){return a.handleReset(o)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return c.a.createElement(E.a,{type:"search",style:{color:e?"#f2f2f2":void 0}})}}},a.handleSearch=function(e,t,n){n(),e[0]&&a.getWebsites(Object(O.a)({},t,e[0])),a.setState({searchText:e[0]})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.isEmptyObj=function(e){return 0===Object.keys(e).length},a.cookies=a.props.cookies,a.token=a.cookies.get(H.token),a.state={searchText:"",websites:[],totalItems:0,page:1,limit:10},a.paginationConfig={position:"bottom",total:a.state.totalItems,pageSize:a.state.limit,current:a.state.page,onChange:function(e){return a.onChangePage(e)}},a.onClickRecheckWebsite=a.onClickRecheckWebsite.bind(Object(_.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getWebsites({page:this.state.page,limit:this.state.limit})}},{key:"onChangePage",value:function(e){this.state.totalItems>this.state.limit?this.getWebsites({page:e,limit:this.state.limit}):this.state.searchText||this.getWebsites({page:e,limit:this.state.limit}),this.setState({page:e})}},{key:"getWebsites",value:function(e){var t=this,a=P.getWebsites;this.isEmptyObj(e)||(a+="?"+Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")),this.props.setAppLoading(!0),fetch(a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",accessToken:this.token},signal:this.abortController.signal}).then((function(e){return e.json()})).then((function(e){var a=(e.data.entries||[]).map((function(e){return{domain:e.domain,isTracking:e.isTracking,adsId:e.accountInfo?e.accountInfo.adsId:"",email:e.userInfo?e.userInfo.email:"",expiredAt:e.expiredAt,createdAt:e.createdAt,code:e.code,websiteCode:e.code}}));t.setState({websites:a,totalItems:a.length>0?e.data.totalItems:0}),setTimeout((function(){t.props.setAppLoading(!1)}),500)}))}},{key:"onClickRecheckWebsite",value:function(e){}},{key:"render",value:function(){var e=this,t=[{title:function(e,t){return c.a.createElement("div",null,c.a.createElement(E.a,{type:"chrome",className:"ggAds-icon"}),c.a.createElement("span",null,"Domain"))},dataIndex:"domain",key:"domain",render:function(t,a){return c.a.createElement(Ae,{text:t,onClick:e.onClickRecheckWebsite,record:a})}},{title:"Code",dataIndex:"websiteCode",key:"websiteCode",render:function(e){return c.a.createElement("span",null,e)}},{title:"G\u1eafn tracking",dataIndex:"isTracking",key:"isTracking",render:function(e){return!0===e?c.a.createElement("span",{style:{color:"#44b543"}},c.a.createElement(E.a,{type:"check"})," \u0110\xe3 g\u1eafn"):c.a.createElement("span",{style:{color:"crimson"}},c.a.createElement(E.a,{type:"close"})," Ch\u01b0a g\u1eafn")}},we({title:"AdsId",dataIndex:"adsId",key:"adsId"},this.getColumnSearchProps("adsId")),we({title:"Email",dataIndex:"email",key:"email"},this.getColumnSearchProps("email")),{title:"Ng\xe0y th\xeam",dataIndex:"createdAt",key:"createdAt",render:function(e){return c.a.createElement("span",null,x()(e).format("HH:mm DD/MM/YYYY"))}}];return c.a.createElement("div",{className:"container"},c.a.createElement(A.a,null,c.a.createElement(S.a,{span:24},c.a.createElement(w.a,{pagination:this.paginationConfig,dataSource:this.state.websites,columns:t,rowKey:function(e,t){return e.code},className:"accounts-table"}))))}}]),t}(D),Te=[{title:"Dashboard",path:"",icon:"home",component:Ie},{title:"Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng",path:"users",icon:"user",component:ce},{title:"Qu\u1ea3n l\xfd website",path:"websites",icon:"chrome",component:Object(L.b)(null,n)(Object(v.c)(Pe))},{title:"T\xe0i kho\u1ea3n Google Ads",path:"accounts",icon:"appstore",component:he},{title:"L\u1ed7i Google Ads",path:"google-ads-errors",icon:"bug",component:ve}],xe=a(654),De=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).logout=a.logout.bind(Object(_.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"logout",value:function(){this.props.cookies.remove("token",{path:"/"}),this.props.history.push("/login")}},{key:"render",value:function(){return c.a.createElement(xe.a,{placement:"rightBottom",title:"Tho\xe1t kh\u1ecfi h\u1ec7 th\u1ed1ng?",onConfirm:this.logout,okText:"\u0110\u1ed3ng \xfd",cancelText:"H\u1ee7y"},c.a.createElement(I.a,{type:"link",style:{width:"100%",textAlign:"left",padding:"0 23px"}},c.a.createElement(E.a,{type:"logout"}),c.a.createElement("span",{style:{marginLeft:"8.5px"}},"\u0110\u0103ng xu\u1ea5t")))}}]),t}(c.a.Component),_e=Object(v.c)(Object(f.g)(De)),Ne=(a(646),function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"email"},this.props.users.user?this.props.users.user.email:"")}}]),t}(c.a.Component)),Le=Object(L.b)((function(e){return{users:e.users}}),n)(Ne),Me=y.a.Header,We=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return c.a.createElement(Me,{style:{background:"#fff",padding:0}},c.a.createElement(k.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],style:{lineHeight:"64px"}},c.a.createElement(k.a.Item,{key:"1"},"nav 1"),c.a.createElement(k.a.Item,{key:"2"},"nav 2"),c.a.createElement(k.a.Item,{key:"3"},"nav 3")),c.a.createElement("div",{className:"logo"},this.props.users.user?this.props.users.user.email:""))}}]),t}(i.Component),Ye=Object(L.b)((function(e){return{users:e.users}}),n)(We),Re=a(204),He=a.n(Re),Ue=(a(647),y.a.Footer),Fe=y.a.Sider,Ge=y.a.Content,Ke=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).isAuthenticated=!1,a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"isLoggedIn",value:function(){var e=this.props.cookies,t=e.get(H.token),a=e.get(H.user);return!this.props.users.isLogout&&(t&&a)}},{key:"componentWillMount",value:function(){var e=this.props.cookies;this.isLoggedIn()?this.isAuthenticated=!0:(e.remove(H.token),e.remove(H.user),this.isAuthenticated=!1)}},{key:"render",value:function(){var e=this,t=function(t){var a=t.component,n=Object(u.a)(t,["component"]);return c.a.createElement(f.b,Object.assign({},n,{render:function(t){return e.isAuthenticated?c.a.createElement(a,t):c.a.createElement(f.a,{to:{pathname:"/login",state:{from:t.location}}})}}))},a=window.location.href.split("?")[0].split("/"),n="0";switch(a[a.length-1]){case"update-expiration":n="1";break;case"users":n="2";break;case"accounts":n="3";break;case"websites":n="4";break;case"google-ads-errors":n="5"}return c.a.createElement(y.a,null,c.a.createElement(Fe,{style:{overflow:"auto",height:"100vh",position:"fixed",left:0}},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{alt:"",src:He.a})),c.a.createElement(Le,null),c.a.createElement(k.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[n]},Te.map((function(t,a){return c.a.createElement(k.a.Item,{key:a},c.a.createElement(E.a,{type:t.icon}),c.a.createElement("span",{className:"nav-text"},t.title),c.a.createElement(b.b,{to:"".concat(e.props.match.path,"/").concat(t.path)}))}))),c.a.createElement(_e,null)),c.a.createElement(y.a,{style:{marginLeft:250}},c.a.createElement(Ye,null),c.a.createElement(Ge,{style:{margin:"24px 16px 0",overflow:"initial"}},c.a.createElement("div",{style:{padding:24,background:"#fff",textAlign:"center"}},c.a.createElement("div",null,Te.map((function(a,n){return c.a.createElement(t,{key:n,exact:""===a.path,component:a.component,path:"".concat(e.props.match.path,"/").concat(a.path)})}))))),c.a.createElement(Ue,{style:{textAlign:"center"}},"Click CPanel \xa92019 Created by Appnet Technology")))}}]),t}(i.Component),ze=Object(L.b)((function(e){return{users:e.users}}),n)(Object(v.c)(Object(f.g)(Ke))),Be=(a(648),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var n={email:t.email,password:t.password};fetch(P.login,{method:"POST",body:JSON.stringify(n),headers:{"Content-type":"application/json; charset=UTF-8"},signal:a.abortController.signal}).then((function(e){return 200===e.status?Promise.resolve(e.json()):Promise.reject(e.json())})).then((function(e){var t=a.props.cookies,n=e.data.meta.token,r=e.data.user;a.props.login(r,n),t.set(H.token,n,{path:"/"}),t.set(H.user,r,{path:"/"}),setTimeout((function(){a.props.history.push("/dashboard")}),1e3)}),(function(e){return e.then((function(e){a.setState({loginMessage:e.messages[0]})}))}))}}))},a.state={loginMessage:""},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var e=this;this.props.setAppLoading(!1);var t=this.props.cookies,a=t.get(H.token),n=t.get(H.user);setTimeout((function(){n&&a&&e.props.history.push("/dashboard")}),1e3)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return c.a.createElement("div",null,c.a.createElement(A.a,null,c.a.createElement(S.a,{span:9}),c.a.createElement(S.a,{span:6},c.a.createElement(oe.a,{onSubmit:this.handleSubmit,className:"login-form"},c.a.createElement("div",{className:"form-title"},"Click CPanel"),c.a.createElement("div",{className:"logo"},c.a.createElement("img",{src:a(204),alt:"..."})),c.a.createElement(oe.a.Item,null,e("email",{rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp email"}]})(c.a.createElement(j.a,{prefix:c.a.createElement(E.a,{type:"user"}),placeholder:"Email"}))),c.a.createElement(oe.a.Item,null,e("password",{rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u"}]})(c.a.createElement(j.a,{prefix:c.a.createElement(E.a,{type:"lock"}),type:"password",placeholder:"M\u1eadt kh\u1ea9u"}))),c.a.createElement("p",{style:{color:"red",textAlign:"center"}},this.state.loginMessage),c.a.createElement(oe.a.Item,null,c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement(I.a,{type:"danger",htmlType:"submit",className:"login-form-button"},"\u0110\u0102NG NH\u1eacP"))))),c.a.createElement(S.a,{span:9})))}}]),t}(D)),qe=oe.a.create({name:"normal_login"})(Be),Ve=Object(v.c)(Object(L.b)((function(e){return{users:e.users}}),n)(qe)),Je=a(100);function Qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qe(a,!0).forEach((function(t){Object(O.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $e=Object(Je.b)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLogout:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return{user:t.user,token:t.token,isLogout:!1};case"UNAUTH_USER":return{isLogout:!0};default:return e}},websites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_WEBSITES":case"CHECKING_ATTACH_SCRIPT":break;default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_LOADING":return Xe({},e,{isLoading:t.isLoading});default:return e}}}),Ze=Object(Je.c)($e,{}),et=function(e){X.a.interceptors.response.use((function(e){return e}),(function(t){return 401===t.response.status&&!1===e.users.isLogout&&e.dispatch({type:"UNAUTH_USER"}),t}))},tt=(a(649),a(300)),at=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return this.props.app.isLoading?c.a.createElement("div",{className:"app-loading"},c.a.createElement(tt.a,{tip:"Loading",size:"large"})):c.a.createElement(c.a.Fragment,null)}}]),t}(c.a.Component),nt=Object(L.b)((function(e){return{app:e.app}}),n)(at),rt=function(e){return X.a.get(P.info,{headers:{accesstoken:e}})};et(Ze);var it=function(){var e=c.a.useState(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],r=Object(v.b)(),i=Object(l.a)(r,3),o=i[0],s=i[1],u=i[2];return!1===a&&rt(o.token).then((function(e){n(!0),e.data.data.user&&s(H.user,e.data.data.user,{domain:"/"})})).catch((function(e){u(H.token,{domain:"/"}),u(H.user,{domain:"/"}),n(!0)})),a?c.a.createElement(L.a,{store:Ze},c.a.createElement(v.a,null,c.a.createElement(b.a,null,c.a.createElement(f.d,null,c.a.createElement(f.b,{path:"/login",component:Ve}),c.a.createElement(f.b,{path:"/dashboard",render:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(ze,null))}}),c.a.createElement(f.b,{path:"/**",render:function(){return c.a.createElement(f.a,{to:{pathname:"/dashboard"}})}})),c.a.createElement(nt,null)))):c.a.createElement(c.a.Fragment,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(it,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[343,1,2]]]);
//# sourceMappingURL=main.fe23e1d1.chunk.js.map